<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CyLor Time Loop Experiment</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

* {
  box-sizing: border-box; /* Ensures padding/border are included in width */
}

body {
  margin:0; padding:0;
  font-family: 'Share Tech Mono', monospace;
  background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
  color: #0ff;
  overflow-x: hidden; /* prevent horizontal scroll */
}

#container {
  width: 95%;
  max-width: 480px;
  margin: 2rem auto;
  padding: 1rem;
  background: rgba(0,0,0,0.85);
  border: 2px dashed #0ff;
  border-radius: 10px;
  box-shadow: 0 0 30px #0ff;
  display: flex;
  flex-direction: column;
  align-items: center;
}

h1 {
  font-size: 1.6rem;
  text-align: center;
  text-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
  margin-bottom: 1rem;
}

.text {
  font-size: 1rem;
  line-height: 1.4;
  margin-bottom: 1rem;
  text-align: center;
  word-break: break-word;
}

#buttons {
  display: flex;
  flex-direction: column;
  width: 100%;
  gap: 0.5rem;
}

button {
  width: 100%;
  padding: 0.8rem;
  background: #0ff;
  color: #000;
  font-family: 'Share Tech Mono', monospace;
  font-size: 1rem;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: all 0.2s ease;
}

button:hover {
  background: #00b8b8;
  color: #fff;
  transform: scale(1.03);
}

.glitch {
  animation: glitch 0.3s infinite;
}

@keyframes glitch {
  0% { text-shadow: 2px 0 #f0f, -2px 2px #0ff; }
  25% { text-shadow: -2px -2px #f00, 2px 2px #0ff; }
  50% { text-shadow: 2px 2px #ff0, -2px -2px #0ff; }
  75% { text-shadow: -2px 2px #0f0, 2px -2px #f0f; }
  100% { text-shadow: 2px 0 #f0f, -2px 2px #0ff; }
}

.flicker {
  animation: flicker 0.15s infinite alternate;
}

@keyframes flicker {
  0% { opacity:1; }
  50% { opacity:0.5; }
  100% { opacity:1; }
}

/* Optional: smaller text and buttons on very small screens */
@media (max-width: 350px) {
  h1 { font-size: 1.4rem; }
  .text { font-size: 0.9rem; }
  button { font-size: 0.9rem; padding: 0.7rem; }
}
</style>
</head>
<body>
<div id="container">
  <h1>CyLor Time Loop Experiment</h1>
  <div class="text" id="story">
    You awaken in a dark, neon-lit chamber. The walls hum with unseen machinery. A screen flickers: <span class="glitch">"WELCOME SUBJECT"</span>.  
    Do you:
  </div>
  <div id="buttons">
    <button id="leftButton">Investigate the flickering door to your left</button>
    <button id="rightButton">Step toward the pulsing console on your right</button>
    <button id="resetButton">RESET</button>
  </div>
</div>

<script>
let audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playBeep(freq=440, duration=100) {
  let osc = audioCtx.createOscillator();
  osc.type = ['square','sawtooth','triangle'][Math.floor(Math.random()*3)];
  osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
  osc.connect(audioCtx.destination);
  osc.start();
  osc.stop(audioCtx.currentTime + duration/1000);
}

setInterval(() => {
  if(Math.random() < 0.1) playBeep(Math.random()*1500+200, Math.random()*200+50);
}, 600);

const story = document.getElementById('story');
const leftBtn = document.getElementById('leftButton');
const rightBtn = document.getElementById('rightButton');
const resetBtn = document.getElementById('resetButton');

const endings = [
  'You are trapped in the loop forever.',
  'Assimilation complete. Bleed me if you will...',
  'The vent consumes you.',
  'Mind permanently linked to CyLor.',
  'Lost in the digital void.',
  'You surrender to the cybernetic embrace.',
  'Reality fractures. Your memories leak into the neon matrix.'
];

function randomPaths(base) {
  const options = [
    {text:"Run forward", action:()=>choosePath(base+'1')},
    {text:"Turn around", action:()=>choosePath(base+'2')},
    {text:"Peek at a glowing vent", action:()=>choosePath(base+'3')},
    {text:"Investigate a dark alcove", action:()=>choosePath(base+'4')},
    {text:"Listen to the whispers", action:()=>choosePath(base+'5')},
    {text:"Touch a flickering panel", action:()=>choosePath(base+'6')}
  ];
  return options.sort(()=>0.5-Math.random()).slice(0, Math.floor(Math.random()*2)+2);
}

function choosePath(path) {
  switch(path) {
    case 'left':
      story.innerHTML = `The door opens. A corridor of flickering panels whispers your name.  
      <span class="glitch">"Subject 27â€¦ return."</span> Do you:`;
      updateButtons([
        {text:"Follow the messages deeper", action:()=>choosePath('lore1_2')},
        {text:"Ignore and proceed forward", action:()=>choosePath('lore1_2b')}
      ]);
      break;
    case 'lore1_2':
      story.innerHTML = `Panels display your memories, corrupted and interlaced with CyLor data. Shadows move.  
      Do you:`;
      updateButtons([
        {text:"Merge your mind with CyLor", action:()=>choosePath('lore1_3')},
        {text:"Resist and keep moving", action:()=>choosePath('lore1_3b')}
      ]);
      break;
    case 'lore1_2b':
      story.innerHTML = `You step forward. A pool of liquid neon beckons. Its surface reflects a twisted version of yourself.  
      Do you:`;
      updateButtons([
        {text:"Touch the neon", action:()=>choosePath('lore1_3')},
        {text:"Walk past quickly", action:()=>choosePath('lore1_3b')}
      ]);
      break;
    case 'lore1_3':
      story.innerHTML = `Your consciousness fractures as the station's AI entwines with your neural pathways.  
      <span class="glitch">END: ${endings[Math.floor(Math.random()*endings.length)]}</span>`;
      updateButtons([{text:"RESET", action:resetStory}]);
      break;
    case 'lore1_3b':
      story.innerHTML = `You narrowly avoid assimilation. Neon veins follow your every step. A door slams shut behind you.  
      <span class="glitch">END: ${endings[Math.floor(Math.random()*endings.length)]}</span>`;
      updateButtons([{text:"RESET", action:resetStory}]);
      break;

    case 'right':
      story.innerHTML = `The console hums. A voice whispers promises of forbidden pleasures.  
      <span class="glitch">Your skin tingles...</span> Do you:`;
      updateButtons([
        {text:"Enter the codes", action:()=>choosePath('lore2_2')},
        {text:"Flee", action:()=>choosePath('lore2_2b')}
      ]);
      break;
    case 'lore2_2':
      story.innerHTML = `The console splits open revealing a living data entity coiling around you.  
      Do you:`;
      updateButtons([
        {text:"Embrace fully", action:()=>choosePath('lore2_3')},
        {text:"Attempt to disconnect", action:()=>choosePath('lore2_3b')}
      ]);
      break;
    case 'lore2_2b':
      story.innerHTML = `You flee, but corridors twist unnaturally. Neon tendrils wrap around you.  
      <span class="glitch">END: ${endings[Math.floor(Math.random()*endings.length)]}</span>`;
      updateButtons([{text:"RESET", action:resetStory}]);
      break;
    case 'lore2_3':
      story.innerHTML = `Pleasure and terror mix as your body and data entity intertwine. Your mind fractures beautifully.  
      <span class="glitch">END: ${endings[Math.floor(Math.random()*endings.length)]}</span>`;
      updateButtons([{text:"RESET", action:resetStory}]);
      break;
    case 'lore2_3b':
      story.innerHTML = `You try to disconnect. Pain and bliss shock through your nerves. The entity laughs in binary.  
      <span class="glitch">END: ${endings[Math.floor(Math.random()*endings.length)]}</span>`;
      updateButtons([{text:"RESET", action:resetStory}]);
      break;

    default:
      story.innerHTML = `You proceed along your choice. The world warps and distorts...  
      <span class="glitch">END: ${endings[Math.floor(Math.random()*endings.length)]}</span>`;
      updateButtons([{text:"RESET", action:resetStory}]);
      break;
  }
}

function updateButtons(options) {
  const btns = [leftBtn, rightBtn];
  btns.forEach((btn, i) => {
    if(i < options.length) {
      btn.style.display = 'block';
      btn.innerText = options[i].text;
      btn.onclick = options[i].action;
    } else {
      btn.style.display = 'none';
    }
  });
}

function resetStory() {
  story.innerHTML = `You awaken in a dark, neon-lit chamber. The walls hum with unseen machinery. A screen flickers: <span class="glitch">"WELCOME SUBJECT"</span>.  
  Do you:`;
  leftBtn.style.display = 'block';
  leftBtn.innerText = 'Investigate the flickering door to your left';
  leftBtn.onclick = () => choosePath('left');
  rightBtn.style.display = 'block';
  rightBtn.innerText = 'Step toward the pulsing console on your right';
  rightBtn.onclick = () => choosePath('right');
}

resetStory();
resetBtn.onclick = resetStory;
</script>
</body>
</html>
